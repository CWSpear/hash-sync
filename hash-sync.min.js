!function(n){function e(n){return"undefined"!=typeof n}function t(n){try{return decodeURIComponent(n)}catch(e){}}function a(n,e){return encodeURIComponent(n).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,e?"%20":"+")}function r(e){var a,r,c={};return n.forEach((e||"").split("&"),function(e){if(e&&(a=e.split("="),r=t(a[0]),n.isDefined(r))){var i=n.isDefined(a[1])?t(a[1]):!0;c[r]?n.isArray(c[r])?c[r].push(i):c[r]=[c[r],i]:c[r]=i}}),c}function c(e){var t=[];return n.forEach(e,function(e,r){n.isArray(e)?n.forEach(e,function(n){t.push(a(r,!0)+(n===!0?"":"="+a(n,!0)))}):t.push(a(r,!0)+(e===!0?"":"="+a(e,!0)))}),t.length?t.join("&"):""}n.module("HashSync",[]).directive("hashSync",["$parse","hashSyncHelper",function(n,e){return{require:"ngModel",link:function(t,a,r,c){var i=n(r.replaceHistory)({})===!1?!1:!0,o=function(){var n=e.getHash();c.$setViewValue(n[r.ngModel]),c.$render()};c.$viewValue||o(),t.$watch(r.ngModel,function(){var n=e.getHash();n[r.ngModel]=c.$viewValue,e.setHash(n,i)}),window.addEventListener("hashchange",function(){t.$apply(o)})}}}]).factory("hashSyncHelper",["$location","$parse","$rootScope",function(t,a,i){var o={getHash:function(){return r(t.hash())},setHash:function(a,r){e(r)||(r=!0);var i={};n.forEach(a,function(n,e){n&&(i[e]=n)}),t.hash(c(i)),r&&t.replace()},sync:function(n,e,t){e||(e=i);var r=function(e){var a=o.getHash();a[n]=e,o.setHash(a,t)};r(a(n)(e)),e.$watch(n,r),window.addEventListener("hashchange",function(){e.$apply(function(){var t=o.getHash(),r=t[n];a(n).assign(e,r)})})}};return o}])}();