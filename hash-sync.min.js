!function(n,e){function a(n){return"undefined"!=typeof n}function t(n){try{return decodeURIComponent(n)}catch(e){}}function r(n,e){return encodeURIComponent(n).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,e?"%20":"+")}function c(n){var a,r,c={};return e.forEach((n||"").split("&"),function(n){if(n&&(a=n.split("="),r=t(a[0]),e.isDefined(r))){var i=e.isDefined(a[1])?t(a[1]):!0;c[r]?e.isArray(c[r])?c[r].push(i):c[r]=[c[r],i]:c[r]=i}}),c}function i(n){var a=[];return e.forEach(n,function(n,t){e.isArray(n)?e.forEach(n,function(n){a.push(r(t,!0)+(n===!0?"":"="+r(n,!0)))}):a.push(r(t,!0)+(n===!0?"":"="+r(n,!0)))}),a.length?a.join("&"):""}e.module("HashSync",[]).directive("hashSync",["$parse","hashSyncHelper",function(e,a){return{require:"ngModel",link:function(t,r,c,i){var o=e(c.replaceHistory)({})===!1?!1:!0,u=function(){var n=a.getHash();i.$setViewValue(n[c.ngModel]),i.$render()};i.$viewValue||u(),t.$watch(c.ngModel,function(){var n=a.getHash();n[c.ngModel]=i.$viewValue,a.setHash(n,o)}),n.addEventListener("hashchange",function(){t.$apply(u)})}}}]).factory("hashSyncHelper",["$location","$parse","$rootScope",function(t,r,o){var u={getHash:function(){return c(t.hash())},setHash:function(n,r){a(r)||(r=!0);var c={};e.forEach(n,function(n,e){n&&(c[e]=n)}),t.hash(i(c)),r&&t.replace()},sync:function(e,a,t){a||(a=o);var c=function(n){var a=u.getHash();a[e]=n,u.setHash(a,t)};c(r(e)(a)),a.$watch(e,c),n.addEventListener("hashchange",function(){a.$apply(function(){var n=u.getHash(),t=n[e];r(e).assign(a,t)})})}};return u}])}(this,angular);