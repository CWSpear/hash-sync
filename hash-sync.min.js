!function(){function n(n){return"undefined"!=typeof n}function e(n){try{return decodeURIComponent(n)}catch(e){}}function a(n,e){return encodeURIComponent(n).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,e?"%20":"+")}function r(n){var a,r,t={};return angular.forEach((n||"").split("&"),function(n){if(n&&(a=n.split("="),r=e(a[0]),angular.isDefined(r))){var c=angular.isDefined(a[1])?e(a[1]):!0;t[r]?angular.isArray(t[r])?t[r].push(c):t[r]=[t[r],c]:t[r]=c}}),t}function t(n){var e=[];return angular.forEach(n,function(n,r){angular.isArray(n)?angular.forEach(n,function(n){e.push(a(r,!0)+(n===!0?"":"="+a(n,!0)))}):e.push(a(r,!0)+(n===!0?"":"="+a(n,!0)))}),e.length?e.join("&"):""}angular.module("HashSync",[]).directive("hashSync",["$parse","hashSyncHelper",function(n,e){return{require:"ngModel",link:function(a,r,t,c){var i=n(t.replaceHistory)({})===!1?!1:!0,o=function(){var n=e.getHash();c.$setViewValue(n[t.ngModel]),c.$render()};c.$viewValue||o(),a.$watch(t.ngModel,function(){var n=e.getHash();n[t.ngModel]=c.$viewValue,e.setHash(n,i)}),window.addEventListener("hashchange",function(){a.$apply(o)})}}}]).factory("hashSyncHelper",["$location","$parse","$rootScope",function(e,a,c){var i={getHash:function(){return r(e.hash())},setHash:function(a,r){n(r)||(r=!0);var c={};angular.forEach(a,function(n,e){n&&(c[e]=n)}),e.hash(t(c)),r&&e.replace()},sync:function(n,e,r){e||(e=c);var t=function(e){var a=i.getHash();a[n]=e,i.setHash(a,r)};t(a(n)(e)),e.$watch(n,t),window.addEventListener("hashchange",function(){e.$apply(function(){var r=i.getHash(),t=r[n];a(n).assign(e,t)})})}};return i}])}();